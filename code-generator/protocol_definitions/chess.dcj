(s/defrole ::player)

(s/defsession ::chess []
  (s/alt (::tic-tac-toe-turn-a 1 2)
         (::tic-tac-toe-turn-a 2 1)))

(s/defsession ::tic-tac-toe-turn-a [i j]
  (s/async (s/-->> Long (::player i) (::player j)))
           (s/alt (::tic-tac-toe-turn-a j i)))